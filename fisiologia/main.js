"use strict";const backup={saveGridInputs(){let e=document.querySelectorAll(".ficha__linha-de-inputs input");for(let a=0;a<e.length;a++){e[a].addEventListener("input",()=>{localStorage.setItem(`${keyPrefix}-input${a}`,e[a].value)});localStorage.getItem(`${keyPrefix}-input${a}`)&&(e[a].value=localStorage.getItem(`${keyPrefix}-input${a}`))}},saveExtraInputs(){let e=document.querySelectorAll(".input-nao-celular");e.forEach(e=>{e.addEventListener("input",()=>localStorage.setItem(`${keyPrefix}-${e.id}`,e.value)),e.value=localStorage.getItem(`${keyPrefix}-${e.id}`)})},saveCheckboxOption(e,a){for(let t of e){t.addEventListener("change",()=>localStorage.setItem(`${a}`,t.id));let l=localStorage.getItem(`${a}`);l&&(t.checked=!1,t.id===l&&(t.checked=!0))}}},balancete={toRadioCheckboxes(e){e.forEach(a=>{a.addEventListener("change",()=>{for(let t of e)t.checked=!1;a.checked=!0})})},simularDuplicadoOuTriplicado(e){let a=document.querySelector(".ficha"),t=e.dataset.copiadaficha;a.classList.remove("ficha--duplicado"),a.classList.remove("ficha--triplicado"),a.classList.add(`${t}`)},filtrarEtotalizarCelulas(e){if(e.dataset.stfp){let a=e.dataset.stfp;e.classList.add(`${a}`);let t=a.split("-menos-")[1],l=document.querySelectorAll(`.${a}`),r=document.querySelector(`.${t}`),i=document.querySelector(`.${e.dataset.stfpoutput}`),c=0;for(let o of l)c+=Number(o.value);let s=c-2*Number(r.value);i.value=s}if(e.dataset.diferenca){let d=e.dataset.diferenca,n=d.split("-menos-")[0],u=d.split("-menos-")[1],p=document.querySelector(`.${n}`),f=document.querySelector(`.${u}`),h=document.querySelector(`.${e.dataset.diferencaoutput}`),v=p.value-f.value;h.value=v}if(e.dataset.qtdarequisitar){let q=e.dataset.qtdarequisitar,m=q.split("-menos-")[0],b=q.split("-menos-")[1],E=document.querySelector(`.${m}`),y=document.querySelector(`.${b}`),S=document.querySelector(`.${e.dataset.qtdarequisitaroutput}`),k=2*E.value-y.value;k<0&&(k=0),S.value=k}},clonarHeaderDaFichaParaTodasPaginas(){let e=document.querySelector(".ficha__main__header"),a=document.querySelectorAll(".ficha__linha-de-inputs--1a-da-pagina"),t=document.querySelectorAll(".ficha__main__header--clone");for(let l of t)l.parentElement.removeChild(l);for(let r of a){let i=e.cloneNode(!0);i.classList.add("ficha__main__header--clone"),r.insertAdjacentElement("beforeBegin",i)}},clonarFooterDaFichaParaTodasPaginas(){let e=document.querySelector(".ficha__rodape"),a=document.querySelectorAll(".ficha__main__header--clone"),t=document.querySelectorAll(".ficha__rodape--clone");for(let l of t)l.parentElement.removeChild(l);for(let r of a){let i=e.cloneNode(!0);i.classList.add("ficha__rodape--clone"),r.insertAdjacentElement("beforeBegin",i)}}};function escutarEventos(){let e=document.querySelectorAll(".input-tipo-de-requisicao");balancete.toRadioCheckboxes(e);let a="rb-tipo-de-req";backup.saveCheckboxOption(e,a);let t=document.querySelectorAll(".checkbox-modificador-de-cor-da-ficha");balancete.toRadioCheckboxes(t),a="rb-copia-de-req",backup.saveCheckboxOption(t,a),t.forEach(e=>{e.addEventListener("change",()=>{balancete.simularDuplicadoOuTriplicado(e)}),e.checked&&balancete.simularDuplicadoOuTriplicado(e)});let l=document.querySelectorAll(".ficha__linha-de-inputs input");l.forEach(e=>{e.addEventListener("input",()=>{balancete.filtrarEtotalizarCelulas(e)}),""!==e.value&&balancete.filtrarEtotalizarCelulas(e)})}window.addEventListener("load",()=>{backup.saveGridInputs(),backup.saveExtraInputs(),escutarEventos()});